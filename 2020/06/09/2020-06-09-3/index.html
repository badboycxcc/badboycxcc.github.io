<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>
        cx-blog
    </title>
    
<link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-reply replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            H1ve
        </p>
        <hr>
    </div>
    <div class="post-content">
        <p>H1ve是一款开源的ctf平台,具备解题和攻防对抗模式,并且还有可视化战况界面.是个很不错的平台,我们今天来搭建一下,顺便解决一下搭建的各种问题.</p>
<p>系统版本:centos7</p>
<p>需要环境:<br>docker<br>python2 pip<br>docker-compose<br>mariadb</p>
<p>开始搭建,先重新安装一个centos7的虚拟机.(mini最小化安装,安装过程不表).<br>1.先安装docker</p>
<p>依赖环境(不要问为什么)<br>yum install -y yum-utils device-mapper-persistent-data lvm2 bind-utils python-devel git gcc</p>
<p>设置docker源<br>yum-config-manager –add-repo <a target="_blank" rel="noopener" href="https://download.docker.com/linux/centos/docker-ce.repo">https://download.docker.com/linux/centos/docker-ce.repo</a></p>
<p>安装docker<br>yum install docker-ce -y</p>
<p>2.安装python2 pip<br>安装pip不能通过yum安装,需要先安装epel-release,然后再去安装pip<br>yum -y install epel-release<br>yum -y installpython-pip</p>
<p>升级pip<br>pip install –upgradepip</p>
<p>pip安装docker-compose<br>pip install docker-compose</p>
<p>3.安装docker-compose<br>Pip install docker-compose</p>
<p>4.安装mariadb,</p>
<p>先检查系统是否安装的mariadb.<br>Rpm -qa | grep mariadb</p>
<p>可以看到,默认是安装了,卸载就是.<br>Rpm -qa | grep mariadb | xargs rpm -e–nodeps<br>然后再查看一下</p>
<p>然后安装mariadb数据库.这里要安装指定版本.(10.4.12版本)<br>Vim编辑文件,没有vim.安装一下.<br>Yum install vim -y<br>vim /etc/yum.repos.d/MariaDB.repo</p>
<p>内容:<br>[mariadb]</p>
<p>name = MariaDB<br>baseurl = <a target="_blank" rel="noopener" href="http://yum.mariadb.org/10.4.12/centos7-amd64">http://yum.mariadb.org/10.4.12/centos7-amd64</a><br>gpgkey=<a target="_blank" rel="noopener" href="https://yum.mariadb.org/RPM-GPG-KEY-MariaDB">https://yum.mariadb.org/RPM-GPG-KEY-MariaDB</a><br>gpgcheck=1</p>
<p>更新系统索引,更新系统<br>Yum makecache fast<br>Yum update -y</p>
<p>安装mariadb数据库(10.4.12版本)<br>yum -y install MariaDB-serverMariaDB-client</p>
<p>设置开机自启动mariadb并且开启<br>systemctl enable mariadb<br>systemctl start mariadb</p>
<p>5.下载H1ve源码</p>
<p><a target="_blank" rel="noopener" href="https://github.com/D0g3-Lab/H1ve.git">https://github.com/D0g3-Lab/H1ve.git</a><br>官方github下载速度有点慢,这里建议自己去gitee复制过来下载.下面给出我的地址.<br><a target="_blank" rel="noopener" href="https://gitee.com/cxaqhq/H1ve.git">https://gitee.com/cxaqhq/H1ve.git</a><br>git clone <a target="_blank" rel="noopener" href="https://gitee.com/cxaqhq/H1ve.git">https://gitee.com/cxaqhq/H1ve.git</a></p>
<p>6.启动H1ve<br>修改配置文件中mariadb版本 10.4改成10.4.12<br>Vim single.yml</p>
<p>启动docker<br>systemctl start docker //启动docker<br>systemctl status docker //查看服务信息(是否启动运行)</p>
<p>这里需要等待一会,因为要获取docker镜像文件.(不同地区的网速不一样)<br>然后就开始启动ctfd服务,运行h1ve了.<br>访问地址:<a target="_blank" rel="noopener" href="http://ip:8000/">http://ip:8000/</a></p>
<p>总结</p>
<p>这次还有一些坑没出来,也不知道怎么回事这次这么顺利.<br>遇到的各种坑都是因为环境没搭建好(依赖环境).官方其实没说的很详细.网上的各种教程良莠不齐,各种copy.比如那个安装mariadb数据库就很少有帖子说出来要安装.(之前就是这个地方没安装,然后遇到各种各样的错误,耽误了很长时间)很多东西还是要自己去做才知道.</p>
<p>给出官方参考文档   <a target="_blank" rel="noopener" href="https://h1ve.dao.ge/">https://h1ve.dao.ge/</a></p>

    </div>

    
</div>
    <div class="footer" id="footer">
    <p>Copyright © 2020 <a class="flink" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>-<a class="flink" target="_blank" rel="noopener" href="https://github.com/sanjinhub/hexo-theme-geek">Geek</a>.
        <label class="el-switch el-switch-green el-switch-sm" style="vertical-align: sub;">
            <input type="checkbox" name="switch" id="update_style">
            <span class="el-switch-style"></span>
        </label>
<!--         <script type="text/javascript">
        var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
        document.write(unescape("%3Cspan id='cnzz_stat_icon_1278548644'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/stat.php%3Fid%3D1278548644%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
        </script> -->
    </p>
</div>
<input type="hidden" id="web_style" value="black">
<input type="hidden" id="valine_appid" value="">
<input type="hidden" id="valine_appKey" value="">

<script src="/libs/jquery.min.js"></script>


<script src="/libs/highlight/highlight.pack.js"></script>

<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>

<script src="/js/js.js"></script>

<style type="text/css">
.v * {
    color: #698fca;
}

.v .vlist .vcard .vhead .vsys {
    color: #3a3e4a;
}

.v .vlist .vcard .vh .vmeta .vat {
    color: #638fd5;
}

.v .vlist .vcard .vhead .vnick {
    color: #6ba1ff;
}

.v a {
    color: #8696b1;
}

.v .vlist .vcard .vhead .vnick:hover {
    color: #669bfc;
}
</style>
</body>

</html>